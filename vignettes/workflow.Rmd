---
title: "General Workflow"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{General Workflow}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(eatCodebook)
```

On of the key elements of a codebook are descriptive statistics shortly describing each variable in the data set. What kind of descriptive statistics is reported for each variable depends on the type of the variable. The function `createInputForDescriptives()` creates a template to provide the information that is needed to calculate the descriptive statistics for an `GADSdat` object.

```{r createInputForDescriptives}
inputForDescriptives <- createInputForDescriptives(GADSdat.obj = eatGADS::pisa)
head(inputForDescriptives)
```

The template should be exported to `.xlsx`, modified and reimported to `R`.

```{r export varinfo, eval=FALSE}
eatAnalysis::write_xlsx(inputForDescriptives, "file_path/inputForDescriptives.xlsx")
inputForDescriptives_edited <- readxl::read_excel("file_path/inputForDescriptives.xlsx")
```

```{r edit varinfo, echo=FALSE}
inputForDescriptives_edited <- inputForDescriptives
```


This input is then used to calculate descriptive statistics via `calculateDescriptives()`.

```{r calculate descr}
# just show function calls
showFunctions <- calculateDescriptives(GADSdat.obj = gadsDat, varinfo = varinfo_edited, showCallOnly = TRUE)
showFunctions <- data.frame(varName = names(showFunctions), functionName = as.vector(showFunctions), stringsAsFactors = FALSE)
showFunctions

# acutally calculate descriptives
descStatistics <- calculateDescriptives(GADSdat.obj = eatGADS::pisa, varinfo = varinfo_edited, showCallOnly = FALSE)
descStatistics[[50]]
```


Additionally, the `inputForDescriptives` object can be used to create the scale information.

```{r create templates}
scaleInfo <- createScaleInfo(inputForDescriptives_edited)
head(scaleInfo)
```

```{r create templates}
# register
# structure
# value info
```
